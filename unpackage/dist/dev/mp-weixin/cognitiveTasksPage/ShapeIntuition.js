require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["cognitiveTasksPage/ShapeIntuition"],{202:function(t,e,s){"use strict";(function(t){s(5);i(s(4));var e=i(s(203));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=s,t(e.default)}).call(this,s(1)["createPage"])},203:function(t,e,s){"use strict";s.r(e);var i=s(204),n=s(206);for(var o in n)"default"!==o&&function(t){s.d(e,t,(function(){return n[t]}))}(o);s(210);var r,u=s(20),c=Object(u["default"])(n["default"],i["render"],i["staticRenderFns"],!1,null,"634f2c78",null,!1,i["components"],r);c.options.__file="cognitiveTasksPage/ShapeIntuition.vue",e["default"]=c.exports},204:function(t,e,s){"use strict";s.r(e);var i=s(205);s.d(e,"render",(function(){return i["render"]})),s.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),s.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),s.d(e,"components",(function(){return i["components"]}))},205:function(t,e,s){"use strict";var i;s.r(e),s.d(e,"render",(function(){return n})),s.d(e,"staticRenderFns",(function(){return r})),s.d(e,"recyclableRender",(function(){return o})),s.d(e,"components",(function(){return i}));try{i={uButton:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-button/u-button")]).then(s.bind(null,480))},uLineProgress:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-line-progress/u-line-progress")]).then(s.bind(null,572))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var t=this,e=t.$createElement,s=(t._self._c,t.testFlag&&1==t.testTypeCode?(100*t.imgIndex/60).toFixed(2):null);t.$mp.data=Object.assign({},{$root:{g0:s}})},o=!1,r=[];n._withStripped=!0},206:function(t,e,s){"use strict";s.r(e);var i=s(207),n=s.n(i);for(var o in i)"default"!==o&&function(t){s.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},207:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(s(9)),n=s(13),o=s(208);function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e,s,i,n,o,r){try{var u=t[o](r),c=u.value}catch(a){return void s(a)}u.done?e(c):Promise.resolve(c).then(i,n)}function c(t){return function(){var e=this,s=arguments;return new Promise((function(i,n){var o=t.apply(e,s);function r(t){u(o,i,n,r,c,"next",t)}function c(t){u(o,i,n,r,c,"throw",t)}r(void 0)}))}}var a={name:"shapeIntuition",data:function(){return{p_bg:this.$imageUrl.urls.p_bg,whiteFlagNews:this.$imageUrl.urls.whiteFlagNew,rightPng:this.$imageUrl.urls.rightPng,leftPng:this.$imageUrl.urls.leftPng,showGuider:!1,userId:"",userTestResult:{},imgUrl:"",examImgUrl:"",taskId:"",testFlag:!1,testState:!1,saveFlag:!1,subjectInfo:{name:"形状知觉测试(自上而下)",mobileTestDescription:"测试阶段共10张图片，练习结束后，若您已明白测试规则请按“正式测试”按钮进行正式测试。若您尚未明白测试规则请按“练习测试”按钮重新进行练习测试。"},button0Show:!0,button1Show:!1,testTypeCode:0,imgIndex:0,userTestPicList:[],showImage:!0,difficultList:[10],testPicCount:5,userRightClickDirection:"",userRightResponseCount:0,showWhiteFlag:!1,showDuckEgg:!1,countDownTime:6,countDownStr:"练习马上开始！",countDownShow:!0,testTunrnCount:0,testEndFlag:!1,testResultStrShow:!1,testResultStr:"",userCanClick:!1,myInterval:"",timeOne:"",timeTwo:"",startMilliSeconds:0,userResponseRecords:[],saveFalg:!0,testPlanId:"",isClick:!0,timeOut:5e3}},onLoad:function(t){this.testPlanId=t.testPlanId||"",this.userId=this.$store.state.userInfo.user.id,""!=this.$store.state.userInfo.user.id||getApp().jumpToLoginParams()},onShareAppMessage:function(t){var e={path:"/cognitiveTasksPage/ShapeIntuition?examWidght=ShapeIntuition&FROMTO=cognitiveTasksPage",imageUrl:"",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};if("button"==t.from){t.target.dataset;e.path="/cognitiveTasksPage/ShapeIntuition?examWidght=ShapeIntuition&FROMTO=cognitiveTasksPage"}return e},destroyed:function(){clearInterval(this.myInterval),clearTimeout(this.timeOne),clearTimeout(this.timeTwo)},methods:{userClick:function(t){if(!(this.countDownShow||this.showWhiteFlag&&"NULL"!=t)){this.showDuckEgg=!1,this.showWhiteFlag=!0;var e=(new Date).getTime()-this.startMilliSeconds,s="Wrong";clearTimeout(this.timeTwo),this.userRightClickDirection==t&&1==this.userCanClick&&(this.userRightResponseCount++,this.userCanClick=!1,s="Right"),1==this.testTypeCode&&this.userResponseRecords.push({index:this.imgIndex,rightOrWrong:s,responseTime:e,diff:this.userTestPicList[this.imgIndex-1].diff}),this.imgIndex==this.userTestPicList.length?this.computeScore():this.showTargetNow()}},startTest:function(e){console.log("==123=====>",this.$store.state),""!=this.$store.state.userInfo.user.id?(this.showGuider=!1,this.testTypeCode=e,1==this.testTypeCode&&(this.difficultList=[0,30,60,90,180,360],this.testPicCount=20,this.countDownStr="马上开始！",this.imgIndex=0,this.countDownTime=6,this.testEndFlag=!1,this.showDuckEgg=!1,this.userTestPicList=[]),this.countDownShow=!0,this.userTestPicListCreate(),this.testFlag=!0,this.testState=!0,this.countDown()):t.showToast({title:"请先登录！"})},showTargetNow:function(){var t=this,e=2e3;this.showWhiteFlag=!0,this.showDuckEgg=!1,this.timeOne=setTimeout((function(){t.userRightClickDirection=t.userTestPicList[t.imgIndex].imgDirection,t.examImgUrl=t.userTestPicList[t.imgIndex].imgUrl,t.showDuckEgg=!0,t.showWhiteFlag=!1,t.startMilliSeconds=(new Date).getTime(),t.userCanClick=!0,t.imgIndex++}),1e3),this.timeTwo=setTimeout((function(){1==t.testTypeCode&&t.userClick("NULL")}),e)},ifShowNextOne:function(t){t==this.imgIndex&&this.userClick("NULL")},computeScore:function(){var e=this;if(0==this.testTypeCode)this.testFlag=!1,this.testState=!1,this.countDownStr="练习马上开始！",this.userRightResponseCount=0,this.imgIndex=0,this.countDownTime=6,this.testEndFlag=!1,this.showDuckEgg=!1,this.showWhiteFlag=!1,this.userTestPicList=[],this.userResponseRecords=[],this.button1Show=!0,t.showToast({title:"测试结束！",position:"top"});else{if(this.isClick){this.isClick=!1;var s=(this.userRightResponseCount/this.userResponseRecords.length*100).toFixed(2);this.testFlag=!1,this.testState=!1,this.button0Show=!1,this.button1Show=!1,console.log(this.userResponseRecords);var i={userId:this.userId,userScore:s+"%",userResponseRecords:this.userResponseRecords,testPlanId:this.testPlanId},o=this.$CryptoJS.AesEncrypt(JSON.stringify(i));this.$request.post({url:n.cognizeSHAPE,data:{data:o}}).then((function(s){200==(null===s||void 0===s?void 0:s.code)?e.goTestResult(s.data):t.showToast({title:null===s||void 0===s?void 0:s.msg})}),(function(e){t.showToast({title:e.msg})})),t.showToast({title:"测试结束"})}setTimeout((function(){e.isClick=!0}),this.timeOut)}},goTestResult:function(e){return c(i.default.mark((function s(){var n;return i.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,getApp().getVersionId(e);case 2:n=getApp().globalData.isTrue,setTimeout((function(){n?t.navigateTo({url:"/cognitiveTasksTestResult/testResultNew?id="+e+"&messageShare=1"}):(t.navigateTo({url:"/cognitiveTasksTestResult/testResultNew?id="+e+"&messageShare=1"}),console.log("旧====>",n))}),1e3);case 4:case"end":return s.stop()}}),s)})))()},userTestPicListCreate:function(){var t={};if(0==this.testTypeCode){for(var e=this.getRandomNumber(10,20),s=0;s<this.difficultList.length;s++)for(var i=0;i<e.length;i++){if(t={},i%2==0){var n="R_ELP_test_jitter"+this.difficultList[s]+"_s"+e[i];t.imgUrl=o.shapeIntuitionImgs[n],t.imgDirection="R",t.userClickDirection=""}else{var r="ELP_test_jitter"+this.difficultList[s]+"_s"+e[i];t.imgUrl=o.shapeIntuitionImgs[r],t.imgDirection="L",t.userClickDirection=""}this.userTestPicList.push(t)}this.shuffle(this.userTestPicList)}else{for(var u=0;u<this.difficultList.length;u++){for(var c=[],a=1;a<6;a++){t={};var h="R_ELP_test_jitter"+this.difficultList[u]+"_s"+a;t.imgUrl=o.shapeIntuitionImgs[h],t.imgDirection="R",t.userClickDirection="",t.diff=this.difficultList[u],c.push(t),t={};var l="ELP_test_jitter"+this.difficultList[u]+"_s"+a;t.imgUrl=o.shapeIntuitionImgs[l],t.imgDirection="L",t.userClickDirection="",t.diff=this.difficultList[u],c.push(t)}this.userTestPicList=this.userTestPicList.concat(c),this.testPicCount=this.userTestPicList.length,console.log(this.userTestPicList)}this.shuffle(c)}console.log(this.userTestPicList.length)},getRandomNumber:function(t,e){for(var s=[],i=0;i<t;i++)s.push(Math.floor(Math.random()*e)+1);return s},countDown:function(){var t=this;this.myInterval=setInterval((function(){t.countDownTime--,t.countDownStr=t.countDownTime,0==t.countDownTime&&(t.countDownShow=!1,0==t.testTypeCode?t.showGuider=!0:t.showGuider=!1,t.showTargetNow(),t.showDuckEgg=!1,t.showWhiteFlag=!0,clearInterval(t.myInterval),t.countDownTime=6)}),1e3)},shuffle:function(t){var e,s,i=t.length;while(i)s=Math.floor(Math.random()*i--),e=t[i],t[i]=t[s],t[s]=e}}};e.default=a}).call(this,s(1)["default"])},210:function(t,e,s){"use strict";s.r(e);var i=s(211),n=s.n(i);for(var o in i)"default"!==o&&function(t){s.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},211:function(t,e,s){}},[[202,"common/runtime","common/vendor","cognitiveTasksPage/common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/cognitiveTasksPage/ShapeIntuition.js.map