require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["cognitiveTasksPage/CoginitiveTask"],{239:function(t,e,n){"use strict";(function(t){n(5);s(n(4));var e=s(n(240));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},240:function(t,e,n){"use strict";n.r(e);var s=n(241),o=n(243);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n(246);var u,a=n(20),r=Object(a["default"])(o["default"],s["render"],s["staticRenderFns"],!1,null,"1e571920",null,!1,s["components"],u);r.options.__file="cognitiveTasksPage/CoginitiveTask.vue",e["default"]=r.exports},241:function(t,e,n){"use strict";n.r(e);var s=n(242);n.d(e,"render",(function(){return s["render"]})),n.d(e,"staticRenderFns",(function(){return s["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return s["recyclableRender"]})),n.d(e,"components",(function(){return s["components"]}))},242:function(t,e,n){"use strict";var s;n.r(e),n.d(e,"render",(function(){return o})),n.d(e,"staticRenderFns",(function(){return u})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return s}));try{s={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,480))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var t=this,e=t.$createElement;t._self._c},i=!1,u=[];o._withStripped=!0},243:function(t,e,n){"use strict";n.r(e);var s=n(244),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},244:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(n(9)),o=n(245);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,s,o,i,u){try{var a=t[i](u),r=a.value}catch(c){return void n(c)}a.done?e(r):Promise.resolve(r).then(s,o)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(s,o){var i=t.apply(e,n);function a(t){u(i,s,o,a,r,"next",t)}function r(t){u(i,s,o,a,r,"throw",t)}a(void 0)}))}}var r={name:"CoginitiveTask",data:function(){return{userId:"",countDownTime:20,testCount:60,userResponseMilliSeconds:0,userTestAnswer:[],taskId:"",saveFlag:!1,subjectInfo:"",divShow:!1,buttonShow:!0,passTestExam:!1,testType:"练习测试",testFlag:!1,buttonName:"开始练习",testTypeCode:0,startMilliSeconds:0,divShowInteval:null,countDownInterval:null,myInterval:null,qualifiedCount:0,unQualifiedCount:0,cuntdownMinMilliSeconds:2e3,cuntdownMaxMilliSeconds:4e3,testState:!1,testResultDivShow:!1,pass05SecRate:"",pass1SecRate:"",severalTime:"",showCountDown:!0,countDownStr:"练习马上开始！",redayTime:5,countDown2:null,alert_bg:""}},onShow:function(){this.userId=this.$store.state.userInfo.user.id,this.alert_bg=o.taskImgs.alert_bg,this.subjectInfo=JSON.parse(t.getStorageSync("subjectInfo")),this.imgUrl=this.subjectInfo.imageUrl},mounted:function(){},destroyed:function(){clearInterval(this.divShowInteval),clearInterval(this.countDown2),clearInterval(this.myInterval)},methods:{goBack:function(){this.testPlanId?this.$router.push({name:"testPlanClassify",params:{testPlanId:this.testPlanId}}):this.$router.push("/index/cognitionTask")},format:function(t){return 100===t?"测试已完成":"任务进度"},userClick:function(){this.divShow?(this.userResponseMilliSeconds=(new Date).getTime()-this.startMilliSeconds,this.userResponseMilliSeconds>500?this.unQualifiedCount++:this.qualifiedCount++,this.divShow=!1):(this.unQualifiedCount++,t.showToast({icon:"none",title:"错误点击！",duration:500}))},startTest:function(){var e=this;if(!this.userId)return t.showToast({icon:"none",title:"请先登录！"}),void getApp().jumpToTestRecordLogin();this.startTestTime=(new Date).getTime(),this.testState=!0,this.buttonShow=!1,this.testFlag=!0,this.showCountDown=!0,0==this.testTypeCode?this.countDownStr="练习马上开始！":this.countDownStr="测试马上开始！",this.countDown2=setInterval((function(){0==e.redayTime?(e.countDownStr="开始",e.redayTime=5,setTimeout((function(){e.showCountDown=!1}),1e3),clearInterval(e.countDown2),0==e.testTypeCode&&(e.countDownTime=20,e.countDown()),e.divShowInteval=setInterval((function(){e.divRandomShow(),1==e.testTypeCode&&(e.testCount--,0==e.testCount&&(e.computeScore(),clearInterval(e.divShowInteval)))}),Math.floor(Math.random()*(e.cuntdownMaxMilliSeconds-e.cuntdownMinMilliSeconds+1))+e.cuntdownMinMilliSeconds)):(e.countDownStr=e.redayTime,e.showCountDown=!0,e.redayTime--)}),1e3)},testEnd:function(){this.testState=!1,this.testFlag=!1,t.showToast({icon:"none",title:"测试结束！"})},computeScore:function(){if(0==this.testTypeCode){var e=100*this.qualifiedCount/(100*this.unQualifiedCount+100*this.qualifiedCount);e>=.6?(t.showToast({icon:"success",title:"练习测试通过"}),this.subjectInfo.testDescription=this.subjectInfo.description,this.passTestExam=!0,this.buttonName="正式测试",this.buttonShow=!0,this.testType="正式测试",this.testState=!1,this.testFlag=!1,this.testTypeCode=1,this.cuntdownMaxMilliSeconds=6e3):(this.divShow=!1,this.passTestExam=!1,this.buttonName="重新练习",this.buttonShow=!0,this.testState=!1,this.testFlag=!1,t.showToast({icon:"none",title:"测试未通过，请点击重新测试按钮继续练习！"}))}else this.testState=!1,this.testFlag=!1,this.userResponserSave(),t.showToast({icon:"success",title:"测试结束"}),this.buttonShow=!1},countDown:function(){var t=this;this.myInterval=setInterval((function(){t.countDownTime--,0==t.countDownTime&&(t.computeScore(),clearInterval(t.myInterval),t.countDownTime=0,clearInterval(t.divShowInteval))}),1e3)},divRandomShow:function(){var t=this;1==this.testTypeCode&&this.userTestAnswer.push({key:60-this.testCount,value:0==this.userResponseMilliSeconds?new Date-this.startMilliSeconds:this.userResponseMilliSeconds}),this.divShow=!this.divShow,this.userResponseMilliSeconds=0,this.startMilliSeconds=(new Date).getTime(),setTimeout((function(){t.divShow=!1}),1e3)},userResponserSave:function(){var e=this,n={userId:this.userId,data:this.userTestAnswer,testPlanId:this.testPlanId},s=this.$CryptoJS.AesEncrypt(JSON.stringify(n));this.$request.post({url:"cognize/ALERTNESS",data:{data:s}}).then((function(n){200==(null===n||void 0===n?void 0:n.code)?e.goTestResult(n.data):t.showToast({title:null===n||void 0===n?void 0:n.msg})}),(function(e){t.showToast({title:e.msg})})),t.showToast({icon:"success",title:"测试完成"})},goTestResult:function(e){return a(s.default.mark((function n(){var o;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,getApp().getVersionId(e);case 2:o=getApp().globalData.isTrue,setTimeout((function(){o?t.navigateTo({url:"/cognitiveTasksTestResult/testResultNew?id="+e}):(t.navigateTo({url:"/cognitiveTasksTestResult/testResult?id="+e+"&messageShare=1&flag="+getApp().globalData.flag}),console.log("旧====>",o))}),1e3);case 4:case"end":return n.stop()}}),n)})))()}}};e.default=r}).call(this,n(1)["default"])},246:function(t,e,n){"use strict";n.r(e);var s=n(247),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},247:function(t,e,n){}},[[239,"common/runtime","common/vendor","cognitiveTasksPage/common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/cognitiveTasksPage/CoginitiveTask.js.map