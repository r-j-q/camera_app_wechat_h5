require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["cognitiveTasksPage/rememberAbilityTask"],{248:function(t,e,n){"use strict";(function(t){n(5);s(n(4));var e=s(n(249));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},249:function(t,e,n){"use strict";n.r(e);var s=n(250),i=n(252);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(255);var o,a=n(20),u=Object(a["default"])(i["default"],s["render"],s["staticRenderFns"],!1,null,"3c48a804",null,!1,s["components"],o);u.options.__file="cognitiveTasksPage/rememberAbilityTask.vue",e["default"]=u.exports},250:function(t,e,n){"use strict";n.r(e);var s=n(251);n.d(e,"render",(function(){return s["render"]})),n.d(e,"staticRenderFns",(function(){return s["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return s["recyclableRender"]})),n.d(e,"components",(function(){return s["components"]}))},251:function(t,e,n){"use strict";var s;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return o})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return s}));try{s={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,480))},uLineProgress:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-line-progress/u-line-progress")]).then(n.bind(null,572))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement;t._self._c},r=!1,o=[];i._withStripped=!0},252:function(t,e,n){"use strict";n.r(e);var s=n(253),i=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,(function(){return s[t]}))}(r);e["default"]=i.a},253:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(n(9)),i=n(13),r=n(254);function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,s,i,r,o){try{var a=t[r](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(s,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function o(t){a(r,s,i,o,u,"next",t)}function u(t){a(r,s,i,o,u,"throw",t)}o(void 0)}))}}var c={name:"rememberAbilityTask",data:function(){return{countDownTime:8,countDownSpanShow:!1,sourceLetterList:[],currentLetter:"",currentLetterIndex:0,resultData:{},currentLetterList:{},nbackIndex:0,taskName:"back0",testTurnCount:0,taskId:"",saveFlag:!1,subjectInfo:"",divShow:!1,showAdd:!1,buttonShow:!0,passTestExam:!1,saveSuccess:!1,testFlag:!1,testType:"练习测试",buttonName:"开始练习",testTypeCode:0,startMilliSeconds:0,divShowInteval:"",countDownInterval:"",userId:"",testResult:{},userAnswerList:{back0:[],back1:[],back2:[]},testState:!1,back0SuccessRate:"",back1SuccessRate:"",back2SuccessRate:"",back0backAverageTime:"",back1backAverageTime:"",back2backAverageTime:"",count:0,testPlanId:"",whiteFlag:"",rememberAbilityTask:"",isClick:!0,timeOut:5e3}},onShow:function(){},onLoad:function(){this.whiteFlag=r.rememberAbilityTask.whiteFlag,this.rememberAbilityTask=r.rememberAbilityTask.rememberAbilityTask,this.init(),this.getServerInterfaceData()},mounted:function(){},destroyed:function(){clearInterval(this.divShowInteval),clearInterval(this.countDownInterval)},onShareAppMessage:function(t){var e={path:"/cognitiveTasksPage/rememberAbilityTask?examWidght=rememberAbilityTask&FROMTO=cognitiveTasksPage",imageUrl:"",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};if("button"==t.from){t.target.dataset;e.path="/cognitiveTasksPage/rememberAbilityTask?examWidght=rememberAbilityTask&FROMTO=cognitiveTasksPage"}return e},methods:{init:function(){this.userId=this.$store.state.userInfo.user.id},getServerInterfaceData:function(){var t=this;this.$request.get({url:i.cognizeSubjectInfoGetRecallChar,loadingTip:"加载中...",data:{}}).then((function(e){200==e.code&&(t.resultData=e.data)}))},userAnswerPost:function(){var e=this,n={userId:this.userId,data:this.userAnswerList,testPlanId:""},s=this.$CryptoJS.AesEncrypt(JSON.stringify(n));this.isClick&&(this.isClick=!1,this.$request.post({url:i.cognizeMEMORY,data:{data:s}}).then((function(n){200==(null===n||void 0===n?void 0:n.code)?(console.log("--response测试 结果------\x3e",n),e.goTestResult(n.data)):t.showToast({title:null===n||void 0===n?void 0:n.msg})}),(function(e){t.showToast({title:e.msg})}))),setTimeout((function(){e.isClick=!0}),this.timeOut)},goTestResult:function(e){return u(s.default.mark((function n(){var i;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,getApp().getVersionId(e);case 2:i=getApp().globalData.isTrue,console.log("旧====>",i),setTimeout((function(){i?t.navigateTo({url:"/cognitiveTasksTestResult/testResultNew?id="+e+"&messageShare=1"}):t.navigateTo({url:"/cognitiveTasksTestResult/testResult?id="+e+"&messageShare=1&flag="+getApp().globalData.flag})}),1e3);case 5:case"end":return n.stop()}}),n)})))()},userClick:function(){this.currentLetterIndex-1>=0&&(this.currentLetterList[this.currentLetterIndex-1].ifUserClick=!0,this.currentLetterList[this.currentLetterIndex-1].userResponseTime=(new Date).getTime()-this.startMilliSeconds,console.log((new Date).getTime()-this.startMilliSeconds))},startTest:function(){var e=this;if(""==this.$store.state.userInfo.user.id)return t.showToast({icon:"none",title:"请先登录！"}),void getApp().jumpToTestRecordLogin();this.pageDataInit(),this.divShow=!0,this.buttonShow=!1,this.countDownSpanShow=!1,this.testState=!0,this.divShowInteval=setInterval((function(){e.showAdd=!0,1==e.testTypeCode&&(e.count++,console.log(e.count)),e.divRandomShow()}),2e3)},testEnd:function(){},computeScore:function(){for(var t=0,e=!1,n=0;n<this.currentLetterList.length;n++)0==(this.currentLetterList[n].ifUserClick^this.currentLetterList[n].ifNeedClick)&&t++;return(t>=Math.ceil(.5*this.currentLetterList.length)&&0==this.nbackIndex||t>=Math.ceil(.5*this.currentLetterList.length)&&1==this.nbackIndex||t>=Math.ceil(.5*this.currentLetterList.length)&&2==this.nbackIndex)&&(e=!0),e},countDown:function(){var t=this;this.countDownInterval=setInterval((function(){t.countDownTime--,0==t.countDownTime&&(t.startTest(),clearInterval(t.countDownInterval),t.countDownTime=8)}),1e3)},divRandomShow:function(){var t=this;if(this.startMilliSeconds=(new Date).getTime(),this.currentLetterIndex==this.currentLetterList.length)clearInterval(this.divShowInteval),this.currentTurnCompute();else{var e=this.currentLetterList[this.currentLetterIndex];this.currentLetter=e.letter,setTimeout((function(){t.showAdd=!1}),1e3),this.currentLetterIndex++}},currentTurnCompute:function(){if(this.divShow=!1,this.currentLetterIndex=0,0==this.testTypeCode)this.computeScore()?2==this.nbackIndex?(this.testType="正式测试",this.buttonName="正式测试",this.buttonShow=!0,this.testTypeCode=1,this.nbackIndex=0,this.taskName="back0",this.testTurnCount=0,this.testState=!1,this.testFlag=!1,this.currentLetter="",t.showToast({title:"您已掌握测试规则，请点击正式测试按钮，进入正式测试！"})):(this.nbackIndex++,this.countDownSpanShow=!0,this.taskName="back"+this.nbackIndex,this.testTurnCount=0,this.countDown()):(this.testType="重新练习",this.buttonName="重新练习",this.buttonShow=!0,this.testState=!1,this.testFlag=!1,this.currentLetter="",t.showToast({title:"测试未通过，请点击'重新测试'按钮继续练习！"}));else if(this.testTurnCount++,0==this.nbackIndex)this.userAnswerList.back0.push(this.currentLetterList),2==this.testTurnCount&&(this.nbackIndex++,this.countDownSpanShow=!0,this.taskName="back"+this.nbackIndex,this.testTurnCount=0),this.countDownSpanShow=!0,this.countDown();else if(1==this.nbackIndex)this.userAnswerList.back1.push(this.currentLetterList),2==this.testTurnCount&&(this.nbackIndex++,this.countDownSpanShow=!0,this.taskName="back"+this.nbackIndex,this.testTurnCount=0),this.countDownSpanShow=!0,this.countDown();else if(2==this.nbackIndex){if(this.userAnswerList.back2.push(this.currentLetterList),2==this.testTurnCount)return this.testState=!1,this.testFlag=!1,this.userAnswerPost(),clearInterval(this.countDownInterval),t.showToast({title:"测试结束"}),"";this.countDownSpanShow=!0,this.countDown()}},pageDataInit:function(){this.testFlag=!0,0==this.testTypeCode?this.sourceLetterList=this.resultData.exerciseList[this.taskName]:this.sourceLetterList=this.resultData.examList[this.taskName][this.testTurnCount],this.createCurrentLetterList(this.sourceLetterList)},createCurrentLetterList:function(t){this.currentLetterList=[];for(var e=0;e<t.length;e++){var n={letter:t[e],ifNeedClick:!1,ifUserClick:!1,userResponseTime:0};0==e||e<this.nbackIndex||(this.sourceLetterList[e]==t[0]&&0==this.nbackIndex||this.sourceLetterList[e]==t[e-this.nbackIndex]&&0!=this.nbackIndex)&&(n.ifNeedClick=!0),this.currentLetterList.push(n)}}}};e.default=c}).call(this,n(1)["default"])},255:function(t,e,n){"use strict";n.r(e);var s=n(256),i=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,(function(){return s[t]}))}(r);e["default"]=i.a},256:function(t,e,n){}},[[248,"common/runtime","common/vendor","cognitiveTasksPage/common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/cognitiveTasksPage/rememberAbilityTask.js.map