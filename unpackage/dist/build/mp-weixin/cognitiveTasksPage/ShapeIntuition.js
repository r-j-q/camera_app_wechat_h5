require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["cognitiveTasksPage/ShapeIntuition"],{"04e7":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return s}));var s={uButton:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-button/u-button")]).then(i.bind(null,"e8d6"))},uLineProgress:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-line-progress/u-line-progress")]).then(i.bind(null,"4cd3"))}},n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.testFlag&&1==t.testTypeCode?(100*t.imgIndex/60).toFixed(2):null);t.$mp.data=Object.assign({},{$root:{g0:i}})},o=[]},"1a07":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(i("a34a")),n=i("6df0"),o=i("9104");function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e,i,s,n,o,r){try{var u=t[o](r),a=u.value}catch(c){return void i(c)}u.done?e(a):Promise.resolve(a).then(s,n)}function a(t){return function(){var e=this,i=arguments;return new Promise((function(s,n){var o=t.apply(e,i);function r(t){u(o,s,n,r,a,"next",t)}function a(t){u(o,s,n,r,a,"throw",t)}r(void 0)}))}}var c={name:"shapeIntuition",data:function(){return{p_bg:this.$imageUrl.urls.p_bg,whiteFlagNews:this.$imageUrl.urls.whiteFlagNew,rightPng:this.$imageUrl.urls.rightPng,leftPng:this.$imageUrl.urls.leftPng,userId:"",userTestResult:{},imgUrl:"",examImgUrl:"",taskId:"",testFlag:!1,testState:!1,saveFlag:!1,subjectInfo:{name:"形状知觉测试(自上而下)",mobileTestDescription:"测试阶段共10张图片，练习结束后，若您已明白测试规则请按“正式测试”按钮进行正式测试。若您尚未明白测试规则请按“练习测试”按钮重新进行练习测试。"},button0Show:!0,button1Show:!1,testTypeCode:0,imgIndex:0,userTestPicList:[],showImage:!0,difficultList:[10],testPicCount:5,userRightClickDirection:"",userRightResponseCount:0,showWhiteFlag:!1,showDuckEgg:!1,countDownTime:6,countDownStr:"练习马上开始！",countDownShow:!0,testTunrnCount:0,testEndFlag:!1,testResultStrShow:!1,testResultStr:"",userCanClick:!1,myInterval:"",timeOne:"",timeTwo:"",startMilliSeconds:0,userResponseRecords:[],saveFalg:!0,testPlanId:"",isClick:!0,timeOut:5e3}},onLoad:function(t){this.testPlanId=t.testPlanId||"",this.userId=this.$store.state.userInfo.user.id,""!=this.$store.state.userInfo.user.id||getApp().jumpToLoginParams()},onShareAppMessage:function(t){var e={path:"/cognitiveTasksPage/ShapeIntuition?examWidght=ShapeIntuition&FROMTO=cognitiveTasksPage",imageUrl:"",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};if("button"==t.from){t.target.dataset;e.path="/cognitiveTasksPage/ShapeIntuition?examWidght=ShapeIntuition&FROMTO=cognitiveTasksPage"}return e},destroyed:function(){clearInterval(this.myInterval),clearTimeout(this.timeOne),clearTimeout(this.timeTwo)},methods:{userClick:function(t){if(!(this.countDownShow||this.showWhiteFlag&&"NULL"!=t)){this.showDuckEgg=!1,this.showWhiteFlag=!0;var e=(new Date).getTime()-this.startMilliSeconds,i="Wrong";clearTimeout(this.timeOne),this.userRightClickDirection==t&&1==this.userCanClick&&(this.userRightResponseCount++,this.userCanClick=!1,i="Right"),this.imgIndex==this.userTestPicList.length&&(this.testEndFlag=!0,clearTimeout(this.timeOne)),1==this.testTypeCode&&this.userResponseRecords.push({index:this.imgIndex,rightOrWrong:i,responseTime:e,diff:this.userTestPicList[this.imgIndex-1].diff})}},startTest:function(e){console.log("==123=====>",this.$store.state),""!=this.$store.state.userInfo.user.id?(this.testTypeCode=0==e?0:1,1==this.testTypeCode&&(this.difficultList=[0,30,60,90,180,360],this.testPicCount=20,this.countDownStr="马上开始！",this.imgIndex=0,this.countDownTime=6,this.testEndFlag=!1,this.showDuckEgg=!1,this.userTestPicList=[]),this.countDownShow=!0,this.userTestPicListCreate(),this.testFlag=!0,this.testState=!0,this.countDown()):t.showToast({title:"请先登录！"})},showTargetNow:function(){var t=this,e=2e3;this.timeOne=setTimeout((function(){t.showWhiteFlag=!0,t.showDuckEgg=!1,t.timeTwo=setTimeout((function(){t.testEndFlag?t.computeScore():(t.userRightClickDirection=t.userTestPicList[t.imgIndex].imgDirection,t.examImgUrl=t.userTestPicList[t.imgIndex].imgUrl,t.showDuckEgg=!0,t.showWhiteFlag=!1,t.startMilliSeconds=(new Date).getTime(),t.userCanClick=!0,t.imgIndex++,t.imgIndex==t.userTestPicList.length&&(t.testEndFlag=!0),t.showTargetNow(),t.timeOne=setTimeout(t.ifShowNextOne,e,t.imgIndex))}),1e3)}),e)},ifShowNextOne:function(t){t==this.imgIndex&&this.userClick("NULL")},computeScore:function(){var e=this;if(0==this.testTypeCode)this.testFlag=!1,this.testState=!1,this.countDownStr="练习马上开始！",this.userRightResponseCount=0,this.imgIndex=0,this.countDownTime=6,this.testEndFlag=!1,this.showDuckEgg=!1,this.showWhiteFlag=!1,this.userTestPicList=[],this.userResponseRecords=[],this.button1Show=!0,t.showToast({title:"测试结束！",position:"top"});else{if(this.isClick){this.isClick=!1;var i=(this.userRightResponseCount/this.userResponseRecords.length*100).toFixed(2);this.testFlag=!1,this.testState=!1,this.button0Show=!1,this.button1Show=!1,console.log(this.userResponseRecords);var s={userId:this.userId,userScore:i+"%",userResponseRecords:this.userResponseRecords,testPlanId:this.testPlanId},o=this.$CryptoJS.AesEncrypt(JSON.stringify(s));this.$request.post({url:n.cognizeSHAPE,data:{data:o}}).then((function(i){200==(null===i||void 0===i?void 0:i.code)?e.goTestResult(i.data):t.showToast({title:null===i||void 0===i?void 0:i.msg})}),(function(e){t.showToast({title:e.msg})})),t.showToast({title:"测试结束"})}setTimeout((function(){e.isClick=!0}),this.timeOut)}},goTestResult:function(e){return a(s.default.mark((function i(){var n;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,getApp().getVersionId(e);case 2:n=getApp().globalData.isTrue,setTimeout((function(){n?t.navigateTo({url:"/cognitiveTasksTestResult/testResultNew?id="+e+"&messageShare=1"}):(t.navigateTo({url:"/cognitiveTasksTestResult/testResultNew?id="+e+"&messageShare=1"}),console.log("旧====>",n))}),1e3);case 4:case"end":return i.stop()}}),i)})))()},userTestPicListCreate:function(){var t={};if(0==this.testTypeCode){for(var e=this.getRandomNumber(10,20),i=0;i<this.difficultList.length;i++)for(var s=0;s<e.length;s++){if(t={},s%2==0){var n="R_ELP_test_jitter"+this.difficultList[i]+"_s"+e[s];t.imgUrl=o.shapeIntuitionImgs[n],t.imgDirection="R",t.userClickDirection=""}else{var r="ELP_test_jitter"+this.difficultList[i]+"_s"+e[s];t.imgUrl=o.shapeIntuitionImgs[r],t.imgDirection="L",t.userClickDirection=""}this.userTestPicList.push(t)}this.shuffle(this.userTestPicList)}else{for(var u=0;u<this.difficultList.length;u++){for(var a=[],c=1;c<6;c++){t={};var h="R_ELP_test_jitter"+this.difficultList[u]+"_s"+c;t.imgUrl=o.shapeIntuitionImgs[h],t.imgDirection="R",t.userClickDirection="",t.diff=this.difficultList[u],a.push(t),t={};var l="ELP_test_jitter"+this.difficultList[u]+"_s"+c;t.imgUrl=o.shapeIntuitionImgs[l],t.imgDirection="L",t.userClickDirection="",t.diff=this.difficultList[u],a.push(t)}this.userTestPicList=this.userTestPicList.concat(a),this.testPicCount=this.userTestPicList.length,console.log(this.userTestPicList)}this.shuffle(a)}console.log(this.userTestPicList.length)},getRandomNumber:function(t,e){for(var i=[],s=0;s<t;s++)i.push(Math.floor(Math.random()*e)+1);return i},countDown:function(){var t=this;this.myInterval=setInterval((function(){t.countDownTime--,t.countDownStr=t.countDownTime,0==t.countDownTime&&(t.countDownShow=!1,t.showTargetNow(),t.showDuckEgg=!1,t.showWhiteFlag=!0,clearInterval(t.myInterval),t.countDownTime=6)}),1e3)},shuffle:function(t){var e,i,s=t.length;while(s)i=Math.floor(Math.random()*s--),e=t[s],t[s]=t[i],t[i]=e}}};e.default=c}).call(this,i("543d")["default"])},"5a2d":function(t,e,i){"use strict";i.r(e);var s=i("04e7"),n=i("f0ad");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("7d9b");var r,u=i("f0c5"),a=Object(u["a"])(n["default"],s["b"],s["c"],!1,null,"60c5597c",null,!1,s["a"],r);e["default"]=a.exports},7957:function(t,e,i){"use strict";(function(t){i("9263");s(i("66fd"));var e=s(i("5a2d"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},"7d9b":function(t,e,i){"use strict";var s=i("a6e2"),n=i.n(s);n.a},a6e2:function(t,e,i){},f0ad:function(t,e,i){"use strict";i.r(e);var s=i("1a07"),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e["default"]=n.a}},[["7957","common/runtime","common/vendor","cognitiveTasksPage/common/vendor"]]]);