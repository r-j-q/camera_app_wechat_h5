require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["cognitiveTasksPage/continueAdditionTask"],{"0d6a":function(t,e,n){"use strict";n.r(e);var o=n("162e"),i=n("5016");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("2397");var u,r=n("f0c5"),a=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"486ddf2d",null,!1,o["a"],u);e["default"]=a.exports},"162e":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}));var o={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"e8d6"))},uLineProgress:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-line-progress/u-line-progress")]).then(n.bind(null,"4cd3"))}},i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},2397:function(t,e,n){"use strict";var o=n("b523"),i=n.n(o);i.a},"41f3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=u(n("a34a")),i=n("6df0"),s=n("ab1b");function u(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,o,i,s,u){try{var r=t[s](u),a=r.value}catch(h){return void n(h)}r.done?e(a):Promise.resolve(a).then(o,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function u(t){r(s,o,i,u,a,"next",t)}function a(t){r(s,o,i,u,a,"throw",t)}u(void 0)}))}}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={name:"continueAdditionTask",data:function(){return{countDownTime30:30,userId:"",testResult:{},countDownTime:300,testCount:6,taskId:"",saveFlag:!1,subjectInfo:null,answerButtonShow:!1,buttonShow:!0,passTestExam:!1,testType:"练习测试",buttonName:"开始练习",testTypeCode:0,testFlag:!1,countDownInterval:"",additionNumCount:2,currentAnswer:0,showSpanText:"",totalCount:0,rightCount:0,rightCount2:0,rightCount3:0,rightCount4:0,rightCount5:0,rightCount6:0,currentRoundRightCount:0,stepWidth:1,stepEndFlag:6,testState:!1,testResultDivShow:!1,testResultStr:"",userScore:"",rightThree:0,wrongTwo:0,rightCountList:[],testPlanId:"",add_bg:"",add_mid:"",myInterval30:null}},onShow:function(){this.add_bg=s.taskImgs.add_bg,this.add_mid=s.taskImgs.add_mid,this.init(),this.divShow=!1,this.testState=!1,this.testResult={},this.countDownTime30=30,this.countDownTime=300,this.testCount=6,this.taskId="",this.saveFlag=!1,this.subjectInfo=null,this.answerButtonShow=!1,this.buttonShow=!0,this.passTestExam=!1,this.testType="练习测试",this.buttonName="开始练习",this.testTypeCode=0,this.testFlag=!1,this.countDownInterval="",this.additionNumCount=2,this.currentAnswer=0,this.showSpanText="",this.totalCount=0,this.rightCount=0,this.rightCount2=0,this.rightCount3=0,this.rightCount4=0,this.rightCount5=0,this.rightCount6=0,this.currentRoundRightCount=0,this.stepWidth=1,this.stepEndFlag=6,this.testState=!1,this.testResultDivShow=!1,this.testResultStr="",this.userScore="",this.rightThree=0,this.wrongTwo=0,this.rightCountList=[],this.testPlanId="",clearInterval(this.myInterval30)},destroyed:function(){clearInterval(this.countDownInterval),clearInterval(this.myInterval30)},mounted:function(){},onShareAppMessage:function(t){var e={path:"/cognitiveTasksPage/continueAdditionTask?examWidght=continueAdditionTask&FROMTO=cognitiveTasksPage",imageUrl:"",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};if("button"==t.from){t.target.dataset;e.path="/cognitiveTasksPage/continueAdditionTask?examWidght=continueAdditionTask&FROMTO=cognitiveTasksPage"}return e},methods:{init:function(){this.userId=this.$store.state.userInfo.user.id},userClick:function(t){if(this.totalCount++,t==this.currentAnswer?1==this.testTypeCode?(this.rightCount++,this.nNumRightCount(),this.currentRoundRightCount++,this.rightThree++,this.wrongTwo=0,this.rightThree>=3&&0==this.wrongTwo&&(this.additionNumCount++,this.rightThree=0,this.wrongTwo=0)):(this.rightCount++,this.totalCount%2==0&&(this.additionNumCount=this.additionNumCount+1>6?6:this.additionNumCount+1)):1==this.testTypeCode?(this.currentRoundRightCount=0,this.rightThree=0,this.wrongTwo++,this.additionNumCount>2&&0==this.rightThree&&this.wrongTwo>=2&&(this.additionNumCount--,this.rightThree=0,this.wrongTwo=0)):this.totalCount%2==0&&(this.additionNumCount=this.additionNumCount+1>6?6:this.additionNumCount+1),6==this.totalCount&&0==this.testTypeCode)return this.testEnd(),this.testFlag=!1,this.showSpanText="",void(this.answerButtonShow=!1);this.testFlag&&this.createComputeSpanText()},startTest:function(){if(""==this.$store.state.userInfo.user.id)return t.showToast({icon:"none",title:"请先登录！"}),void getApp().jumpToTestRecordLogin();this.createComputeSpanText(),this.testFlag=!0,this.buttonShow=!1,this.answerButtonShow=!0,this.testState=!0,1==this.testTypeCode?this.countDown():0==this.testTypeCode&&this.countDown30()},testEnd:function(){0==this.testTypeCode?(this.totalCount==this.rightCount?(this.testTypeCode=1,console.log("--正式测试222-----\x3e",this.testTypeCode),this.buttonName="正式测试",this.testType="正式测试",this.buttonShow=!0,this.answerButtonShow=!0,this.testState=!1,clearInterval(this.myInterval30),t.showToast({icon:"none",title:"通过练习测试，开始进行正式测试！"})):(this.testTypeCode=0,this.buttonName="重新测试",this.buttonShow=!0,this.testState=!1,this.answerButtonShow=!0,t.showToast({icon:"none",title:"测试未通过，请点击'重新测试'按钮继续练习！"}),clearInterval(this.myInterval30),this.countDownTime30=30),this.pageDataInit()):(this.testState=!1,this.getUserTestScore(),t.showToast({icon:"none",title:"测试结束！"}),this.buttonShow=!1,this.answerButtonShow=!1,this.showSpanText="")},countDown30:function(){var e=this;this.myInterval30=setInterval((function(){e.countDownTime30--,console.log("任务-------- 进度",e.countDownTime30),0==e.countDownTime30&&(e.divShow=!1,e.testState=!1,e.testResult={},e.countDownTime=300,e.testCount=6,e.taskId="",e.saveFlag=!1,e.subjectInfo=null,e.answerButtonShow=!1,e.buttonShow=!0,e.passTestExam=!1,e.testType="练习测试",e.buttonName="开始练习",e.testTypeCode=0,e.testFlag=!1,e.countDownInterval="",e.additionNumCount=2,e.currentAnswer=0,e.showSpanText="",e.totalCount=0,e.rightCount=0,e.rightCount2=0,e.rightCount3=0,e.rightCount4=0,e.rightCount5=0,e.rightCount6=0,e.currentRoundRightCount=0,e.stepWidth=1,e.stepEndFlag=6,e.testState=!1,e.testResultDivShow=!1,e.testResultStr="",e.userScore="",e.rightThree=0,e.wrongTwo=0,e.rightCountList=[],e.testPlanId="",t.showToast({icon:"none",title:"测试未通过，请点击'重新测试'按钮继续练习！"}),clearInterval(e.myInterval30),e.countDownTime30=30)}),1e3)},countDown:function(){var t=this,e=setInterval((function(){t.countDownTime--,console.log("任务-------- 进度",t.countDownTime),0==t.countDownTime&&(t.testEnd(),clearInterval(e),t.countDownTime=300)}),1e3)},createComputeSpanText:function(){this.testCount--;for(var t="",e=0,n=this.additionNumCount;n>0;n--){var o=Math.floor(10*Math.random());e+=o,t+=o+"+"}this.showSpanText=t.substr(0,t.length-1),this.currentAnswer=e%10},nNumRightCount:function(){var t=this,e=this.rightCountList.findIndex((function(e){return e.key==t.additionNumCount}));-1!==e?this.rightCountList[e].value++:this.rightCountList.push({key:this.additionNumCount,value:1})},pageDataInit:function(){this.rightCount2=0,this.rightCount3=0,this.rightCount4=0,this.rightCount5=0,this.rightCount6=0,this.totalCount=0,this.rightCount=0,this.additionNumCount=2,this.currentAnswer=0,this.currentRoundRightCount=0},getUserTestScore:function(){this.testResult.userId=this.userId,this.testResult.total=this.totalCount,this.testResult.data=this.rightCountList;var t=0;this.rightCountList.length>0&&this.rightCountList.map((function(e){t+=e.value*Math.pow(2,e.key-2)})),this.testResult.score=isFinite(parseFloat(Math.log2(t)).toFixed(2))?parseFloat(Math.log2(t)).toFixed(2):"0",console.log("this.testResult.score----",isFinite(parseFloat(Math.log2(t)).toFixed(2))),console.log("this.testResult.score",this.testResult.score),this.userTestResultSave()},userTestResultSave:function(){var e=this,n=c({},this.testResult),o=this.$CryptoJS.AesEncrypt(JSON.stringify(n));this.$request.post({url:i.cognizeADDITION,data:{data:o}}).then((function(n){200==(null===n||void 0===n?void 0:n.code)?e.goTestResult(n.data):t.showToast({title:null===n||void 0===n?void 0:n.msg})}),(function(e){t.showToast({title:e.msg})}))},goTestResult:function(e){return a(o.default.mark((function n(){var i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,getApp().getVersionId(e);case 2:i=getApp().globalData.isTrue,setTimeout((function(){i?t.navigateTo({url:"/cognitiveTasksTestResult/testResultNew?id="+e}):(t.navigateTo({url:"/cognitiveTasksTestResult/testResult?id="+e+"&messageShare=1&flag="+getApp().globalData.flag}),console.log("旧====>",i))}),1e3);case 4:case"end":return n.stop()}}),n)})))()}}};e.default=d}).call(this,n("543d")["default"])},5016:function(t,e,n){"use strict";n.r(e);var o=n("41f3"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"6b9a":function(t,e,n){"use strict";(function(t){n("9263");o(n("66fd"));var e=o(n("0d6a"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},b523:function(t,e,n){}},[["6b9a","common/runtime","common/vendor","cognitiveTasksPage/common/vendor"]]]);