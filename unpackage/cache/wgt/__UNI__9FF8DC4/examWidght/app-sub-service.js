(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["examWidght/app-sub-service"],{"26b06":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"Li-ExamWidght",props:["QuestionList","total","currentIndex"],data:function(){return{checked_user:this.$imageUrl.urls.checked_user,checked_:this.$imageUrl.urls.checked_}},watch:{},created:function(){},methods:{goPrev:function(){this.$emit("goPrevAnswer")},goNext:function(){this.$emit("goNextAnswer")},onItem:function(t){this.$emit("onItemAnswer",t)},onListItem:function(t){this.$emit("onListItemAnswer",t)},subMit:function(){this.$emit("subMitList")}}};e.default=i},"30c6":function(t,e,n){"use strict";n.r(e);var i=n("26b06"),r=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=r.a},"6a55":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={uLineProgress:n("4cd3").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("u-line-progress",{attrs:{"striped-active":!0,height:"24rpx",percentage:t.percentage,_i:1}})],1)},s=[]},"73e8":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=u(n("a34a")),s=u(n("f5ff")),o=u(n("c08e")),a=n("26cb"),c=n("6df0");function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(i,r)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){l(s,i,r,o,a,"next",t)}function a(t){l(s,i,r,o,a,"throw",t)}o(void 0)}))}}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={components:{examWidght:s.default,LineProgress:o.default},computed:p({},(0,a.mapGetters)(["userInfo"])),data:function(){return{scale_infos:[{questionType:"",answer:""}],scale_index:0,scale_all:0,scale_result:[],scale_checkItems:[],scale_percent:0,checkedCities:[],lastText:"\u4e0a\u4e00\u9898",nextText:"\u4e0b\u4e00\u9898",finishText:"\u5b8c\u6210",radio:"",scale_result_all:[],listIndex:0,showIndexText:!1,numBoxShow:!1,questionType:0,flag:"",price:"",resultId:"",timer:"",QuestionListAll:[],QuestionList:{answer:""},currentIndex:0,total:0,orderNo:""}},onLoad:function(t){i=this,t.flag&&(i.flag=t.flag,i.id=t.id,uni.setNavigationBarTitle({title:t.name}),i.getScaleInfoAnswerList(t.flag))},onHide:function(){clearInterval(this.timer)},methods:{goPrevAnswer:function(){if(i.currentIndex<1)uni.showToast({icon:"none",title:"\u5df2\u7ecf\u662f\u7b2c\u4e00\u9898"});else{var t=i.currentIndex-1;i.currentIndex=t;var e=Object.assign({},i.QuestionListAll[t]);i.QuestionList=e}},goNextAnswer:function(){var t=i.currentIndex+1;if(t>i.QuestionListAll.length-1)return i.currentIndex=t-1,void uni.showToast({icon:"none",title:"\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9898"});if(""!=i.QuestionListAll[i.currentIndex].fldAnswer){i.currentIndex=t;var e=Object.assign({},i.QuestionListAll[t]);i.QuestionList=e}else uni.showToast({icon:"none",title:"\u8bf7\u5148\u7b54\u9898"})},onItemAnswer:function(t){i.QuestionListAll[i.currentIndex].checkItems=t.fldOptionText,i.QuestionListAll[i.currentIndex].fldAnswer=t.fldOptionText;var e=Object.assign({},i.QuestionListAll[i.currentIndex]);i.QuestionList=e},onListItemAnswer:function(t){if(i.currentIndex>=i.total-1){i.QuestionListAll[i.currentIndex].checkItems=t.fldOptionText,i.QuestionListAll[i.currentIndex].fldAnswer=t.fldOptionText;var e=Object.assign({},i.QuestionListAll[i.currentIndex]);return i.QuestionList=e,void i.subMitList()}i.currentIndex=i.currentIndex+1,i.QuestionListAll[i.currentIndex-1].checkItems=t.fldOptionText,i.QuestionListAll[i.currentIndex-1].fldAnswer=t.fldOptionText;var n=Object.assign({},i.QuestionListAll[i.currentIndex]);i.QuestionList=n},getQueryOrder:function(t){i.$request.get({url:c.queryOrder+"/"+t,loadingTip:"\u52a0\u8f7d\u4e2d...",data:{}}).then((function(t){var e=JSON.parse(t.data.body);"200"==t.code?"SUCCESS"==e.trade_state?(uni.navigateTo({url:"/scaleTestResults/testResults/index?resultId="+i.resultId}),clearInterval(i.timer),uni.showToast({title:"\u652f\u4ed8\u6210\u529f"})):"CLOSED"==e.trade_state||clearInterval(i.timer):uni.showToast({title:"\u652f\u4ed8\u5931\u8d25"})}))},payWchat:function(t,e,n,r,s,o,a){uni.requestPayment({provider:t,timeStamp:e,nonceStr:n,package:r,signType:s,paySign:o,success:function(t){i.timer=setInterval((function(){i.getQueryOrder(a)}),1e3)},fail:function(t){uni.navigateTo({url:"/scalePage/testRecord/index"}),uni.showToast({icon:"none",title:"\u652f\u4ed8\u5931\u8d25"})}})},getH5Pay:function(t){var e=i.$CryptoJS.AesEncrypt(JSON.stringify(t));i.$request.post({url:"".concat(c.h5Pay),loadingTip:"\u52a0\u8f7d\u4e2d...",data:{data:e}}).then((function(t){var e="".concat(t.data.codeUrl,"&redirect_url=").concat(url,":8999/scalePage/paymentStatus/index?resultId=").concat(i.resultId,"&orderNo=").concat(i.orderNo);window.open(e)}))},getNative:function(t){var e=i.$CryptoJS.AesEncrypt(JSON.stringify(t));i.$request.post({url:"".concat(c.native),loadingTip:"\u52a0\u8f7d\u4e2d...",data:{data:e}}).then((function(t){i.orderNo=t.data.orderNo}))},getQueryPromotionBySubjectId:function(e){return d(r.default.mark((function n(){var s;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=c.queryPromotionBySubjectId+"/"+e,n.next=3,i.$request.get({url:s,loadingTip:"\u52a0\u8f7d\u4e2d...",data:{}}).then((function(n){var r,s,o,a;t("log","=\u83b7\u53d6\u652f\u4ed8\u91d1\u989d\u63a5\u53e3\u6570\u636e====\u300b",n," at examWidght/examWidght/index.vue:320"),i.price=n.data.price;var c={productId:e,userId:null===(r=i.userInfo)||void 0===r||null===(s=r.user)||void 0===s?void 0:s.id,resultId:i.resultId,description:n.data.name,total:n.data.price,openId:null===(o=i.userInfo)||void 0===o||null===(a=o.openId)||void 0===a?void 0:a.openId};t("log","==\u672c\u673aip222==========\u300b"," at examWidght/examWidght/index.vue:331"),i.getNative(c)}));case 3:case"end":return n.stop()}}),n)})))()},getScaleInfoAnswerList:function(t){i.$request.get({url:"".concat(c.getScaleInfo,"/").concat(t),loadingTip:"\u52a0\u8f7d\u4e2d...",data:{}}).then((function(t){if(200==t.code&&t.data.length>0){i.scale_infos=t.data,i.scale_all=i.scale_infos.length,i.scale_checkItems=i.scale_infos[i.scale_index].checkItems.split("\uff1b"),i.scale_percent=parseInt((i.scale_index+1)/i.scale_all),i.scale_percent=100*(i.scale_index+1)/i.scale_all;i.scale_infos.forEach((function(t,e){t.questionID=t.id,t.fldAnswer="";var n=[];if(t.checkItems){var i=t.checkItems.split("\uff1b");i.forEach((function(t,e){n.push({fldOptionText:t,fldOptionIndex:e+1})})),t.QuestionOptionList=n}})),i.total=i.scale_infos.length,i.QuestionListAll=i.scale_infos,i.QuestionList=i.scale_infos[i.currentIndex]}}))},subMitList:function(e){var n,r,s=i.QuestionListAll;if(""!=i.QuestionListAll[i.currentIndex].fldAnswer){s.forEach((function(t){delete t.QuestionOptionList,delete t.fldAnswer,delete t.questionID}));var o={testPlanId:"",scale_result:s,userId:null===(n=i.userInfo)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.id};t("log","\u63d0\u4ea4\u7684\u53c2\u6570",o," at examWidght/examWidght/index.vue:426");var a=i.$CryptoJS.AesEncrypt(JSON.stringify(o));i.$request.post({url:"".concat(c.getResult,"/").concat(i.flag),loadingTip:"\u52a0\u8f7d\u4e2d...",data:{data:a}}).then((function(t){i.resultId=t.data,i.getQueryPromotionBySubjectId(i.id)}))}else uni.showToast({icon:"none",title:"\u8bf7\u5148\u7b54\u9898"})},getUserIP:function(t){var e=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=new e({iceServers:[]}),i=function(){},r={},s=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g,o=function(e){r[e]||t(e),r[e]=!0};n.createDataChannel(""),n.createOffer().then((function(t){t.sdp.split("\n").forEach((function(t){t.indexOf("candidate")<0||t.match(s).forEach(o)})),n.setLocalDescription(t,i,i)})).catch((function(t){})),n.onicecandidate=function(t){t&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.match(s)&&t.candidate.candidate.match(s).forEach(o)}}}};e.default=h}).call(this,n("0de9")["default"])},8756:function(t,e,n){"use strict";n.r(e);var i=n("73e8"),r=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=r.a},a213:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","exam-list-row"),attrs:{_i:0}},[n("view",[n("view",{staticClass:t._$s(2,"sc","exam-list-title fontSize19 fontWeight"),attrs:{_i:2}},[t._v(t._$s(2,"t0-0",t._s(t.currentIndex+1))+t._$s(2,"t0-1",t._s(t.QuestionList.answer)))]),n("view",{staticClass:t._$s(3,"sc","exam-list-content fontSize16"),attrs:{_i:3}},t._l(t._$s(4,"f",{forItems:t.QuestionList.QuestionOptionList}),(function(e,i,r,s){return n("view",{key:t._$s(4,"f",{forIndex:r,key:i}),staticClass:t._$s("4-"+s,"sc","disRowAroundStart"),class:t._$s("4-"+s,"c",t.QuestionList.fldAnswer==e.fldOptionText?"checked_user":"checked_"),attrs:{_i:"4-"+s},on:{click:function(n){return n.stopPropagation(),t.onListItem(e)}}},[n("image",{staticClass:t._$s("5-"+s,"sc","exam-list-content-img mr10"),attrs:{src:t._$s("5-"+s,"a-src",t.QuestionList.fldAnswer==e.fldOptionText?t.checked_user:t.checked_),_i:"5-"+s}}),t._v(t._$s("4-"+s,"t1-0",t._s(e.fldOptionText)))])})),0)]),n("view",{staticClass:t._$s(6,"sc","exam-list-button displayRow"),attrs:{_i:6}},[t._$s(7,"i",t.currentIndex>0)?n("button",{staticClass:t._$s(7,"sc","content_app11 phcolor"),attrs:{_i:7},on:{click:t.goPrev}}):t._e(),t._$s(8,"i",t.currentIndex<t.total&&t.currentIndex!=t.total-1)?n("button",{staticClass:t._$s(8,"sc","content_app11 phcolor"),attrs:{_i:8},on:{click:t.goNext}}):t._e(),t._$s(9,"i",t.currentIndex+1==t.total)?n("button",{staticClass:t._$s(9,"sc","content_app11 phcolor"),attrs:{_i:9},on:{click:t.subMit}}):t._e()])])},s=[]},a706:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:["currentIndex","total"],data:function(){return{percentage:0}},watch:{currentIndex:function(t,e){this.percentage=getApp().percentageLineProgress(t+1,this.total)}},methods:{}};e.default=i},c08e:function(t,e,n){"use strict";n.r(e);var i=n("6a55"),r=n("f84e");for(var s in r)"default"!==s&&function(t){n.d(e,t,(function(){return r[t]}))}(s);var o,a=n("f0c5"),c=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"3d858dd2",null,!1,i["a"],o);e["default"]=c.exports},c822:function(t,e,n){"use strict";n.r(e);var i=n("e9be"),r=n("8756");for(var s in r)"default"!==s&&function(t){n.d(e,t,(function(){return r[t]}))}(s);var o,a=n("f0c5"),c=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"4b48f8d5",null,!1,i["a"],o);e["default"]=c.exports},e9be:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={uSticky:n("b56e").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("u-sticky",{attrs:{_i:1}},[n("LineProgress",{attrs:{currentIndex:t.currentIndex,total:t.total,_i:2}})],1),n("swiper",{attrs:{current:t._$s(3,"a-current",t.currentIndex),_i:3}},t._l(t._$s(4,"f",{forItems:t.QuestionListAll}),(function(e,i,r,s){return n("swiper-item",{key:t._$s(4,"f",{forIndex:r,key:i})},[n("scroll-view",{attrs:{_i:"5-"+s},on:{scrolltolower:function(t){}}},[n("exam-widght",{attrs:{total:t.total,currentIndex:t.currentIndex,QuestionList:t.QuestionList,_i:"6-"+s},on:{goPrevAnswer:t.goPrevAnswer,goNextAnswer:t.goNextAnswer,onItemAnswer:t.onItemAnswer,subMitList:t.subMitList,onListItemAnswer:t.onListItemAnswer}})],1)])})),0)],1)},s=[]},f5ff:function(t,e,n){"use strict";n.r(e);var i=n("a213"),r=n("30c6");for(var s in r)"default"!==s&&function(t){n.d(e,t,(function(){return r[t]}))}(s);var o,a=n("f0c5"),c=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"412d9f68",null,!1,i["a"],o);e["default"]=c.exports},f84e:function(t,e,n){"use strict";n.r(e);var i=n("a706"),r=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=r.a}}]);